{% extends 'theme.html' %}

{% block main %}

<!-- Categories Bar -->
<section class="categories-bar">
  <a href="#" class="category-item">
    <img src="/media/img/grocery.webp" alt="Grocery">
    <p>Grocery</p>
  </a>
  <a href="#" class="category-item">
    <img src="https://via.placeholder.com/50" alt="Mobiles">
    <p>Mobiles</p>
  </a>
  <a href="#" class="category-item">
    <img src="https://via.placeholder.com/50" alt="Fashion">
    <p>Fashion</p>
  </a>
  <a href="#" class="category-item">
    <img src="https://via.placeholder.com/50" alt="Electronics">
    <p>Electronics</p>
  </a>
  <a href="#" class="category-item">
    <img src="https://via.placeholder.com/50" alt="Home & Furniture">
    <p>Home & Furniture</p>
  </a>
  <a href="#" class="category-item">
    <img src="https://via.placeholder.com/50" alt="Appliances">
    <p>Appliances</p>
  </a>
  <a href="#" class="category-item">
    <img src="https://via.placeholder.com/50" alt="Beauty & Toys">
    <p>Beauty & Toys</p>
  </a>
  <a href="#" class="category-item">
    <img src="https://via.placeholder.com/50" alt="Two Wheelers">
    <p>Two Wheelers</p>
  </a>
</section>


<!-- Sliding Hero Banner -->
<section class="hero-banner container my-4">
  <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="/media/img/sw3.webp" class="d-block w-100" alt="Slide 1">
      </div>
      <div class="carousel-item">
        <img src="/media/img/sw2.webp" class="d-block w-100" alt="Slide 2">
      </div>
      <div class="carousel-item">
        <img src="/media/img/sw1.webp" class="d-block w-100" alt="Slide 3">
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</section>

<!-- Categories Section -->
 <style>
  .card-img-top {
    width: 150px;
    height: 150px;
    object-fit: cover;
    display: block;
    margin: 0 auto;
}

 </style>
<section class="categories container my-4">
  <h2 class="mb-3">Top Categories</h2>
  <div class="row">
    {% for category in categories %}
    <div class="col-md-3 mt-3">
      <div class="card mt-3">
        <img src="{{ category.cat_img.url }}" class="card-img-top" alt="{{ category.name }}">
        <div class="card-body">
          <h5 class="card-title text-center">{{ category.name }}</h5>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>



<!-- Widgets -->
  <section class="widgets container my-4">
    <h2 class="mb-3">Top discounts</h2>
    <div class="d-flex overflow-auto">
      {% for offer in offers %}
      <div class="offer-widget mx-2" style="width: 180px; text-align: center;">
        <!-- Dynamic Section Title -->
        <h4 class="text-center" style="font-size: 1rem;">{{ offer.title }}</h4>
        <div class="card" style="width: 100%; padding: 6px; box-sizing: border-box;">
          <div style="width: 140px; height: 140px; margin: 0 auto; background-color: #fff; padding: 10px; box-sizing: border-box;">
            <img src="{{ offer.offer_img.url }}" alt="{{ offer.offer_name }}" style="width: 100%; height: 100%; object-fit: cover;">
          </div>
          <div class="card-body text-center">
            <h6 class="card-title">{{ offer.offer_name }}</h6>
            <p class="card-text text-muted">{{ offer.offer }}</p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>
  

<!-- Product Grid -->
<section class="products container my-4">
  <h2 class="mb-3">Popular Products</h2>
  <div class="row">
    {% for product in products %}
    <div class="col-md-3">
      <div class="card">
        <!-- Product Image -->
        <a href="{% url 'product_detail' product.id %}">
        <img src="{{ product.image.url }}" class="card-img-top mt-3" alt="{{ product.name }}"></a>

        <div class="card-body">
          <!-- Product Name -->
          <h5 class="card-title"><a href="{% url 'product_detail' product.id %}">{{ product.name }}</a></h5>
          

          <!-- Product Description 
          <p class="card-text">{{ product.desc|truncatewords:10 }}</p> -->

          <!-- Product Price -->
          <p class="card-text"><strong>${{ product.price }}</strong></p>
         
          
          <!-- Add to Cart Button (Inside a Form) -->
          <form method="POST" action="{% url 'cart' %}">
            {% csrf_token %}
            <input type="hidden" name="product_id" value="{{ product.id }}">
            <button type="submit" class="btn btn-primary w-100" name="add_to_cart">Add to Cart</button>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>
{%endblock%}